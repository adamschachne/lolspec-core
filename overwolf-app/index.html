<!DOCTYPE html>
<html>
	<head>
		<script src="js/jquery.min.js"></script>
		<link rel="stylesheet" href="style.css" />
		<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
		<title>LoL Spectate</title>
	</head>

	<body>
		<div id="topBar" align="right" onmousedown="dragMove();">
			<a class="topBar-element" onclick="minimizeWindow();" >_</a>
			<a class="topBar-element" onclick="closeWindow();" >X</a>
		</div>
		<div id="content" style='width:100%; height: calc(100% - 60px);'></div>
		<div id="bottomBar" align="right" onmousedown="dragMove();">
	</body>

	<script>
		function dragMove(){
			overwolf.windows.getCurrentWindow(function(result){
				if (result.status=="success"){
					overwolf.windows.dragMove(result.window.id);
				}
			});
		};
		function closeWindow(){
			overwolf.windows.getCurrentWindow(function(result){
				if (result.status=="success"){
					overwolf.windows.close(result.window.id);
				}
			});
		};
		function minimizeWindow() {
			overwolf.windows.getCurrentWindow(function (result) {
				if (result.status=="success") {
					overwolf.windows.minimize(result.window.id);
				}
			})
		}

		if (location.href.indexOf('gamelaunchevent') == -1) { // not being launched by launch_events
			var authKey = localStorage.getItem("accessKey");
			$(document).ready(function() {
				$('#content').append("<iframe style='width:100%; height:100%;' src='http://teamchat.lol'#"+authKey+"'></iframe>");
			})
			// window.close();
			// this could open another window instead of taking the user directly to lolspec
		}
		else {
			minimizeWindow();
		}
	</script>

	<script type="text/javascript" src="login.js"></script>
	<script type="text/javascript" src="overwolfplugin.js"></script>
	<script type="text/javascript" src="script.js"></script>
</html>
